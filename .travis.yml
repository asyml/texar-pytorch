sudo: required
language: python
dist: xenial  # required for Python 3.7

stages:
  - linting
  - type-check
  - tests

jobs:
  include:
    - stage: linting
      python: 3.7
      install:
        - pip install flake8
      script: flake8 . --count --select=E901,E999,F821,F822,F823 --max-complexity=10 --max-line-length=80 --show-source --statistics
    - stage: type-check
      python: 3.6.7
      install:
        - pip install mypy
      script:
        - echo $(mypy --version)
        - mypy .
    - stage: tests
      python: 3.7
      script: pytest
    - python: 3.6
      script: pytest


notifications:
  email: false
